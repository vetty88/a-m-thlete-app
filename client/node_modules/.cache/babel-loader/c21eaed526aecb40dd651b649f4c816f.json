{"ast":null,"code":"import _objectSpread from\"C:\\\\MONASH BOOTCAMP\\\\YW_Amthlete-App\\\\amthlete-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\MONASH BOOTCAMP\\\\YW_Amthlete-App\\\\amthlete-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\MONASH BOOTCAMP\\\\YW_Amthlete-App\\\\amthlete-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\MONASH BOOTCAMP\\\\YW_Amthlete-App\\\\amthlete-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\MONASH BOOTCAMP\\\\YW_Amthlete-App\\\\amthlete-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import API from\"../utils/API\";import Jumbotron from\"../components/Jumbotron\";import{Container,Row,Col}from\"../components/Grid\";import Form from\"../components/Form\";import Search from\"../components/Search\";import Nav from\"../components/Nav\";// import Footer from \"../components/Footer\"\nvar SearchCompetitions=/*#__PURE__*/function(_Component){_inherits(SearchCompetitions,_Component);var _super=_createSuper(SearchCompetitions);function SearchCompetitions(){var _this;_classCallCheck(this,SearchCompetitions);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={search:\"Dressage Jackpot\",competitions:[],error:\"\",message:\"\"};_this.handleInputChange=function(event){_this.setState({search:event.target.value});};_this.handleformSubmit=function(event){event.preventDefault();// once it clicks it connects to the Equestrian competition api with the Competitions value\nAPI.getSearchCompetitions(_this.state.search).then(function(res){if(res.data.items===\"error\"){throw new Error(res.data.items);}else{// store response in a array\nvar results=res.data.items;//map through array\nresults=results.map(function(result){//store each competition in a new object\nresult={key:result.id,id:result.id,eventName:result.volumeInfo.eventName,horse:result.volumeInfo.horses,resultNotes:result.volumeInfo.resultNotes,image:result.volumeInfo.imageLinks.thumbnail,link:result.volumeInfo.infoLink,buttonText:\"Complete competition\"};return result;});// reset state\n_this.setState({competitions:results,error:\"\"});}}).catch(function(err){return _this.setState({error:err.items});});};_this.handlecompetitionsButton=function(event){// console.log(event)\nevent.preventDefault();console.log(_this.state.competitions);console.log(event.target.id);var savedCompetitions=_this.state.competitions.filter(function(competition){return competition.id===event.target.id;});savedCompetitions=savedCompetitions[0];console.log(savedCompetitions);API.saveCompetition(savedCompetitions).then(_this.setState({competitions:_this.state.competitions.map(function(competition){if(competition.id===event.target.id){return _objectSpread(_objectSpread({},competition),{},{buttonText:\"competitions!\"});}else{return competition;}})})).catch(function(err){return console.log(\"ERROR\",err);});};return _this;}_createClass(SearchCompetitions,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Nav,null),/*#__PURE__*/React.createElement(Jumbotron,null),/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{size:\"12\"},/*#__PURE__*/React.createElement(Form,{handleFormSubmit:this.handleFormSubmit,handleInputChange:this.handleInputChange})))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Search,{competitions:this.state.competitions,handleSavedButton:this.handleSavedButton})));}}]);return SearchCompetitions;}(Component);export default SearchCompetitions;","map":{"version":3,"sources":["C:/MONASH BOOTCAMP/YW_Amthlete-App/amthlete-app/client/src/pages/Search.js"],"names":["React","Component","API","Jumbotron","Container","Row","Col","Form","Search","Nav","SearchCompetitions","state","search","competitions","error","message","handleInputChange","event","setState","target","value","handleformSubmit","preventDefault","getSearchCompetitions","then","res","data","items","Error","results","map","result","key","id","eventName","volumeInfo","horse","horses","resultNotes","image","imageLinks","thumbnail","link","infoLink","buttonText","catch","err","handlecompetitionsButton","console","log","savedCompetitions","filter","competition","saveCompetition","handleFormSubmit","handleSavedButton"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport API from \"../utils/API\";\r\nimport Jumbotron from \"../components/Jumbotron\";\r\nimport { Container, Row, Col } from \"../components/Grid\";\r\nimport Form from \"../components/Form\";\r\nimport Search from \"../components/Search\";\r\nimport Nav from \"../components/Nav\";\r\n// import Footer from \"../components/Footer\"\r\n\r\nclass SearchCompetitions extends Component {\r\n  //initial state\r\n  state = {\r\n    search: \"Dressage Jackpot\",\r\n    competitions: [],\r\n    error: \"\",\r\n    message: \"\",\r\n  };\r\n\r\n  //function for Competitions bar\r\n  handleInputChange = (event) => {\r\n    this.setState({ search: event.target.value });\r\n  };\r\n\r\n  //function for submit button on Competitions form\r\n  handleformSubmit = (event) => {\r\n    event.preventDefault();\r\n    // once it clicks it connects to the Equestrian competition api with the Competitions value\r\n    API.getSearchCompetitions(this.state.search)\r\n      .then((res) => {\r\n        if (res.data.items === \"error\") {\r\n          throw new Error(res.data.items);\r\n        } else {\r\n          // store response in a array\r\n          let results = res.data.items;\r\n          //map through array\r\n          results = results.map((result) => {\r\n            //store each competition in a new object\r\n            result = {\r\n              key: result.id,\r\n              id: result.id,\r\n              eventName: result.volumeInfo.eventName,\r\n              horse: result.volumeInfo.horses,\r\n              resultNotes: result.volumeInfo.resultNotes,\r\n              image: result.volumeInfo.imageLinks.thumbnail,\r\n              link: result.volumeInfo.infoLink,\r\n              buttonText: \"Complete competition\"\r\n            };\r\n            return result;\r\n          });\r\n          // reset state\r\n          this.setState({ competitions: results, error: \"\" });\r\n        }\r\n      })\r\n      .catch((err) => this.setState({ error: err.items }));\r\n  };\r\n\r\n  handlecompetitionsButton = (event) => {\r\n    // console.log(event)\r\n    event.preventDefault();\r\n    console.log(this.state.competitions);\r\n    console.log(event.target.id);\r\n    let savedCompetitions = this.state.competitions.filter(\r\n      (competition) => competition.id === event.target.id\r\n    );\r\n    savedCompetitions = savedCompetitions[0];\r\n    console.log(savedCompetitions);\r\n    API.saveCompetition(savedCompetitions)\r\n      .then(this.setState({ competitions: this.state.competitions.map(competition=>{\r\n        if (competition.id === event.target.id){\r\n          return {\r\n            ...competition, buttonText: \"competitions!\"\r\n          }\r\n        } else {\r\n          return competition;\r\n        }\r\n      })\r\n     }))\r\n      .catch((err) => console.log(\"ERROR\", err));\r\n  };\r\n  render() {\r\n    return (\r\n      <>\r\n      <Nav/>\r\n        <Jumbotron/>\r\n        <Container>\r\n          <Row>\r\n            <Col size=\"12\">\r\n              <Form\r\n                handleFormSubmit={this.handleFormSubmit}\r\n                handleInputChange={this.handleInputChange}\r\n              />\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n        <br></br>\r\n        <Container>\r\n          <Search\r\n            competitions={this.state.competitions}\r\n            handleSavedButton={this.handleSavedButton}\r\n          />\r\n        </Container>\r\n        {/* <Footer/> */}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SearchCompetitions;"]},"metadata":{},"sourceType":"module"}